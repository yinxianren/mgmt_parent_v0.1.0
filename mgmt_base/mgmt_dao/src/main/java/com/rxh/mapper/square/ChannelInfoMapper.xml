<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.rxh.mapper.square.ChannelInfoMapper" >
  <resultMap id="BaseResultMap" type="com.rxh.square.pojo.ChannelInfo" >
    <id column="channel_id" property="channelId" jdbcType="VARCHAR" />
    <result column="organization_id" property="organizationId" jdbcType="VARCHAR" />
    <result column="channel_name" property="channelName" jdbcType="VARCHAR" />
    <result column="channel_level" property="channelLevel" jdbcType="INTEGER" />
    <result column="type" property="type" jdbcType="INTEGER" />
    <result column="channel_trans_code" property="channelTransCode" jdbcType="VARCHAR" />
    <result column="pay_url" property="payUrl" jdbcType="VARCHAR" />
    <result column="others" property="others" jdbcType="VARCHAR" />
    <result column="channel_single_fee" property="channelSingleFee" jdbcType="DECIMAL" />
    <result column="channel_rate_fee" property="channelRateFee" jdbcType="DECIMAL" />
    <result column="settle_cycle" property="settleCycle" jdbcType="VARCHAR" />
    <result column="single_min_amount" property="singleMinAmount" jdbcType="DECIMAL" />
    <result column="single_max_amount" property="singleMaxAmount" jdbcType="DECIMAL" />
    <result column="day_quota_amount" property="dayQuotaAmount" jdbcType="DECIMAL" />
    <result column="month_quota_amount" property="monthQuotaAmount" jdbcType="DECIMAL" />
    <result column="out_channel_id" property="outChannelId" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="DATE" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    channel_id, organization_id, channel_name, channel_level, type, channel_trans_code,
    pay_url, others, channel_single_fee, channel_rate_fee, settle_cycle, single_min_amount,
    single_max_amount, day_quota_amount, month_quota_amount, out_channel_id, status,
    create_time
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.rxh.square.pojo.ChannelInfoExample" >
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from channel_info
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select
    <include refid="Base_Column_List" />
    from channel_info
    where channel_id = #{channelId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    delete from channel_info
    where channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.rxh.square.pojo.ChannelInfoExample" >
    delete from channel_info
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.rxh.square.pojo.ChannelInfo" >
    insert into channel_info (channel_id, organization_id, channel_name,
      channel_level, type, channel_trans_code,
      pay_url, others, channel_single_fee,
      channel_rate_fee, settle_cycle, single_min_amount,
      single_max_amount, day_quota_amount, month_quota_amount,
      out_channel_id, status, create_time
      )
    values (#{channelId,jdbcType=VARCHAR}, #{organizationId,jdbcType=VARCHAR}, #{channelName,jdbcType=VARCHAR},
      #{channelLevel,jdbcType=INTEGER}, #{type,jdbcType=INTEGER}, #{channelTransCode,jdbcType=VARCHAR},
      #{payUrl,jdbcType=VARCHAR}, #{others,jdbcType=VARCHAR}, #{channelSingleFee,jdbcType=DECIMAL},
      #{channelRateFee,jdbcType=DECIMAL}, #{settleCycle,jdbcType=VARCHAR}, #{singleMinAmount,jdbcType=DECIMAL},
      #{singleMaxAmount,jdbcType=DECIMAL}, #{dayQuotaAmount,jdbcType=DECIMAL}, #{monthQuotaAmount,jdbcType=DECIMAL},
      #{outChannelId,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER}, #{createTime,jdbcType=DATE}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.rxh.square.pojo.ChannelInfo" >
    insert into channel_info
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="organizationId != null" >
        organization_id,
      </if>
      <if test="channelName != null" >
        channel_name,
      </if>
      <if test="channelLevel != null" >
        channel_level,
      </if>
      <if test="type != null" >
        type,
      </if>
      <if test="channelTransCode != null" >
        channel_trans_code,
      </if>
      <if test="payUrl != null" >
        pay_url,
      </if>
      <if test="others != null" >
        others,
      </if>
      <if test="channelSingleFee != null" >
        channel_single_fee,
      </if>
      <if test="channelRateFee != null" >
        channel_rate_fee,
      </if>
      <if test="settleCycle != null" >
        settle_cycle,
      </if>
      <if test="singleMinAmount != null" >
        single_min_amount,
      </if>
      <if test="singleMaxAmount != null" >
        single_max_amount,
      </if>
      <if test="dayQuotaAmount != null" >
        day_quota_amount,
      </if>
      <if test="monthQuotaAmount != null" >
        month_quota_amount,
      </if>
      <if test="outChannelId != null" >
        out_channel_id,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="createTime != null" >
        create_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="organizationId != null" >
        #{organizationId,jdbcType=VARCHAR},
      </if>
      <if test="channelName != null" >
        #{channelName,jdbcType=VARCHAR},
      </if>
      <if test="channelLevel != null" >
        #{channelLevel,jdbcType=INTEGER},
      </if>
      <if test="type != null" >
        #{type,jdbcType=INTEGER},
      </if>
      <if test="channelTransCode != null" >
        #{channelTransCode,jdbcType=VARCHAR},
      </if>
      <if test="payUrl != null" >
        #{payUrl,jdbcType=VARCHAR},
      </if>
      <if test="others != null" >
        #{others,jdbcType=VARCHAR},
      </if>
      <if test="channelSingleFee != null" >
        #{channelSingleFee,jdbcType=DECIMAL},
      </if>
      <if test="channelRateFee != null" >
        #{channelRateFee,jdbcType=DECIMAL},
      </if>
      <if test="settleCycle != null" >
        #{settleCycle,jdbcType=VARCHAR},
      </if>
      <if test="singleMinAmount != null" >
        #{singleMinAmount,jdbcType=DECIMAL},
      </if>
      <if test="singleMaxAmount != null" >
        #{singleMaxAmount,jdbcType=DECIMAL},
      </if>
      <if test="dayQuotaAmount != null" >
        #{dayQuotaAmount,jdbcType=DECIMAL},
      </if>
      <if test="monthQuotaAmount != null" >
        #{monthQuotaAmount,jdbcType=DECIMAL},
      </if>
      <if test="outChannelId != null" >
        #{outChannelId,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=DATE},
      </if>
    </trim>
  </insert>

  <select id="countByExample" parameterType="com.rxh.square.pojo.ChannelInfoExample" resultType="java.lang.Integer" >
    select count(*) from channel_info
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>

  <select id="selectByWhereCondition" parameterType="com.rxh.square.pojo.ChannelInfo"  resultMap="BaseResultMap" >
    select  <include refid="Base_Column_List" />
    from channel_info
    <where>

      <if test="channelId != null" >
       and channel_id  = #{channelId,jdbcType=VARCHAR}
      </if>

      <if test="channelIds != null ">
        and channel_id  in
         <foreach collection="channelIds" item="item" open="(" close=")" separator=",">
            #{item,jdbcType=VARCHAR}
        </foreach>
      </if>
      <if test="organizationId != null" >
        and  organization_id =  #{organizationId,jdbcType=VARCHAR}
      </if>

      <if test="organizationIds != null ">
        and organization_id  in
        <foreach collection="organizationIds" item="item" open="(" close=")" separator=",">
          #{item,jdbcType=VARCHAR}
        </foreach>
      </if>

      <if test="channelName != null" >
        and  channel_name = #{channelName,jdbcType=VARCHAR}
      </if>
      <if test="channelLevel != null" >
        and  channel_level = #{channelLevel,jdbcType=INTEGER}
      </if>
      <if test="type != null" >
        and  type = #{type,jdbcType=INTEGER}
      </if>
      <if test="channelTransCode != null" >
        and channel_trans_code = #{channelTransCode,jdbcType=VARCHAR}
      </if>
      <if test="payUrl != null" >
        and  pay_url = #{payUrl,jdbcType=VARCHAR}
      </if>
      <if test="others != null" >
        and  others = #{others,jdbcType=VARCHAR}
      </if>
      <if test="channelSingleFee != null" >
        and channel_single_fee = #{channelSingleFee,jdbcType=DECIMAL}
      </if>
      <if test="channelRateFee != null" >
        and  channel_rate_fee = #{channelRateFee,jdbcType=DECIMAL}
      </if>
      <if test="settleCycle != null" >
        and  settle_cycle = #{settleCycle,jdbcType=VARCHAR}
      </if>
      <if test="singleMinAmount != null" >
        and  single_min_amount = #{singleMinAmount,jdbcType=DECIMAL}
      </if>
      <if test="singleMaxAmount != null" >
        and single_max_amount = #{singleMaxAmount,jdbcType=DECIMAL}
      </if>
      <if test="dayQuotaAmount != null" >
        and day_quota_amount = #{dayQuotaAmount,jdbcType=DECIMAL}
      </if>
      <if test="monthQuotaAmount != null" >
        and  month_quota_amount = #{monthQuotaAmount,jdbcType=DECIMAL}
      </if>
      <if test="outChannelId != null" >
        and  out_channel_id = #{outChannelId,jdbcType=VARCHAR}
      </if>
      <if test="status != null" >
        and  status = #{status,jdbcType=INTEGER}
      </if>
      <if test="createTime != null" >
        and  create_time = #{createTime,jdbcType=DATE}
      </if>
    </where>
  </select>

  <update id="updateByPrimaryKeySelective" parameterType="com.rxh.square.pojo.ChannelInfo" >
    update channel_info
    <set >
      <if test="organizationId != null" >
        organization_id = #{organizationId,jdbcType=VARCHAR},
      </if>
      <if test="channelName != null" >
        channel_name = #{channelName,jdbcType=VARCHAR},
      </if>
      <if test="channelLevel != null" >
        channel_level = #{channelLevel,jdbcType=INTEGER},
      </if>
      <if test="type != null" >
        type = #{type,jdbcType=INTEGER},
      </if>
      <if test="channelTransCode != null" >
        channel_trans_code = #{channelTransCode,jdbcType=VARCHAR},
      </if>
      <if test="payUrl != null" >
        pay_url = #{payUrl,jdbcType=VARCHAR},
      </if>
      <if test="others != null" >
        others = #{others,jdbcType=VARCHAR},
      </if>
      <if test="channelSingleFee != null" >
        channel_single_fee = #{channelSingleFee,jdbcType=DECIMAL},
      </if>
      <if test="channelRateFee != null" >
        channel_rate_fee = #{channelRateFee,jdbcType=DECIMAL},
      </if>
      <if test="settleCycle != null" >
        settle_cycle = #{settleCycle,jdbcType=VARCHAR},
      </if>
      <if test="singleMinAmount != null" >
        single_min_amount = #{singleMinAmount,jdbcType=DECIMAL},
      </if>
      <if test="singleMaxAmount != null" >
        single_max_amount = #{singleMaxAmount,jdbcType=DECIMAL},
      </if>
      <if test="dayQuotaAmount != null" >
        day_quota_amount = #{dayQuotaAmount,jdbcType=DECIMAL},
      </if>
      <if test="monthQuotaAmount != null" >
        month_quota_amount = #{monthQuotaAmount,jdbcType=DECIMAL},
      </if>
      <if test="outChannelId != null" >
        out_channel_id = #{outChannelId,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=DATE},
      </if>
    </set>
    where channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.rxh.square.pojo.ChannelInfo" >
    update channel_info
    set organization_id = #{organizationId,jdbcType=VARCHAR},
      channel_name = #{channelName,jdbcType=VARCHAR},
      channel_level = #{channelLevel,jdbcType=INTEGER},
      type = #{type,jdbcType=INTEGER},
      channel_trans_code = #{channelTransCode,jdbcType=VARCHAR},
      pay_url = #{payUrl,jdbcType=VARCHAR},
      others = #{others,jdbcType=VARCHAR},
      channel_single_fee = #{channelSingleFee,jdbcType=DECIMAL},
      channel_rate_fee = #{channelRateFee,jdbcType=DECIMAL},
      settle_cycle = #{settleCycle,jdbcType=VARCHAR},
      single_min_amount = #{singleMinAmount,jdbcType=DECIMAL},
      single_max_amount = #{singleMaxAmount,jdbcType=DECIMAL},
      day_quota_amount = #{dayQuotaAmount,jdbcType=DECIMAL},
      month_quota_amount = #{monthQuotaAmount,jdbcType=DECIMAL},
      out_channel_id = #{outChannelId,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=DATE}
    where channel_id = #{channelId,jdbcType=VARCHAR}
  </update>

  <update id="updateOthersInfo">
     update channel_info set others = #{others,jdbcType=VARCHAR} where channel_id = #{channelId,jdbcType=VARCHAR}
  </update>

  <select id="selectAllIdAndName" resultMap="BaseResultMap">
        SELECT
            channel_id,
            channel_name
        FROM channel_info
    </select>

  <select id="getIdIncre" resultType="java.lang.String">
      SELECT
          MAX(@rownum :=@rownum + 1) + 1 AS merchantId
      FROM
          (SELECT @rownum := 1000) r,
         channel_info;
  </select>

  <select id="getMaxId" resultType="java.lang.String">
      SELECT
          MAX(channel_id)  channel_id
      FROM
         channel_info;
  </select>

  <select id="getChannelByPayType" parameterType="java.util.Map" resultMap="BaseResultMap">
    SELECT
    ci.*
    FROM channel_info   ci
    left  join
    organization_info  oi on oi.organization_id=ci.organization_id
    <trim prefix="WHERE" suffixOverrides="AND">
      oi. status = 0 and
      ci. status = 0 and
      <if test="paramMap.payType != null ">
      type = #{paramMap.payType} and
      </if>
      <if test="paramMap.ogIds != null ">
        ci.organization_id IN
        <foreach collection="paramMap.ogIds" item="item" index="index" open="(" close=")" separator=",">
          #{item}
        </foreach> and
      </if>
      <if test="paramMap.chIds != null ">
        ci.channel_id IN
        <foreach collection="paramMap.chIds" item="item" index="index" open="(" close=")" separator=",">
          #{item}
        </foreach> and
      </if>
    </trim>

    ORDER BY ci.channel_level ASC ,ci.channel_rate_fee ASC;
  </select>
  <select id="getChannelById" parameterType="java.util.Map" resultMap="BaseResultMap">
    SELECT
    ci.*
    FROM channel_info   ci
    <trim prefix="WHERE" suffixOverrides="AND">
      <if test="ids != null ">
        ci.channel_id IN
        <foreach collection="ids" item="item" index="index" open="(" close=")" separator=",">
          #{item}
        </foreach> and
      </if>
    </trim>
    ORDER BY ci.channel_level ASC ,ci.channel_rate_fee ASC;
  </select>

  <select id="getType" resultMap="BaseResultMap" parameterType="java.util.Map" >
    select
    type
    from channel_info
    <trim prefix="WHERE" suffixOverrides="AND">
      <if test="ids != null ">
        channel_id IN
        <foreach collection="ids" item="item" index="index" open="(" close=")" separator=",">
          #{item}
        </foreach> and
      </if>
    </trim>
  </select>


  <select id="selectByGroupOrganizationId" resultMap="BaseResultMap">
    select ci.* from channel_info ci group by ci.organization_id;
  </select>
  <select id="countByOrgId" resultType="integer" parameterType="string">
    select count(1) from channel_info
    where
    organization_id=#{id,jdbcType=VARCHAR}
  </select>
    <select id="selectByChannelId" resultType="com.rxh.square.pojo.ChannelInfo">
      select
      <include refid="Base_Column_List" />
      from channel_info
      where channel_id = #{channelId,jdbcType = VARCHAR}
    </select>
</mapper>
